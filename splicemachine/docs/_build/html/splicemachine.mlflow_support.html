

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>splicemachine.mlflow_support package &mdash; Splice MLManager  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="splicemachine.spark package" href="splicemachine.spark.html" />
    <link rel="prev" title="splicemachine package" href="splicemachine.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Splice MLManager
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="splicemachine.html">splicemachine package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="splicemachine.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">splicemachine.mlflow_support package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-splicemachine.mlflow_support.constants">splicemachine.mlflow_support.constants module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-splicemachine.mlflow_support.mlflow_support">splicemachine.mlflow_support.mlflow_support module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-splicemachine.mlflow_support.utilities">splicemachine.mlflow_support.utilities module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-splicemachine.mlflow_support">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="splicemachine.spark.html">splicemachine.spark package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="splicemachine.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="splicemachine.html#module-splicemachine.notebook">splicemachine.notebook module</a></li>
<li class="toctree-l2"><a class="reference internal" href="splicemachine.html#module-splicemachine.stats">splicemachine.stats module</a></li>
<li class="toctree-l2"><a class="reference internal" href="splicemachine.html#module-splicemachine">Module contents</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Splice MLManager</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="splicemachine.html">splicemachine package</a> &raquo;</li>
        
      <li>splicemachine.mlflow_support package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/splicemachine.mlflow_support.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="splicemachine-mlflow-support-package">
<h1>splicemachine.mlflow_support package<a class="headerlink" href="#splicemachine-mlflow-support-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-splicemachine.mlflow_support.constants">
<span id="splicemachine-mlflow-support-constants-module"></span><h2>splicemachine.mlflow_support.constants module<a class="headerlink" href="#module-splicemachine.mlflow_support.constants" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="splicemachine.mlflow_support.constants.DBLibraries">
<em class="property">class </em><code class="sig-prename descclassname">splicemachine.mlflow_support.constants.</code><code class="sig-name descname">DBLibraries</code><a class="reference internal" href="_modules/splicemachine/mlflow_support/constants.html#DBLibraries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.constants.DBLibraries" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.DBLibraries.H2OMOJO">
<code class="sig-name descname">H2OMOJO</code><em class="property"> = 'h2omojo'</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.DBLibraries.H2OMOJO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.DBLibraries.Keras">
<code class="sig-name descname">Keras</code><em class="property"> = 'keras'</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.DBLibraries.Keras" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.DBLibraries.MLeap">
<code class="sig-name descname">MLeap</code><em class="property"> = 'mleap'</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.DBLibraries.MLeap" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.DBLibraries.SKLearn">
<code class="sig-name descname">SKLearn</code><em class="property"> = 'sklearn'</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.DBLibraries.SKLearn" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.DBLibraries.SUPPORTED_LIBRARIES">
<code class="sig-name descname">SUPPORTED_LIBRARIES</code><em class="property"> = ['mleap', 'h2omojo', 'sklearn', 'keras']</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.DBLibraries.SUPPORTED_LIBRARIES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="splicemachine.mlflow_support.constants.FileExtensions">
<em class="property">class </em><code class="sig-prename descclassname">splicemachine.mlflow_support.constants.</code><code class="sig-name descname">FileExtensions</code><a class="reference internal" href="_modules/splicemachine/mlflow_support/constants.html#FileExtensions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.constants.FileExtensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class containing names for
valid File Extensions</p>
<dl class="py method">
<dt id="splicemachine.mlflow_support.constants.FileExtensions.get_valid">
<em class="property">static </em><code class="sig-name descname">get_valid</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; tuple<a class="reference internal" href="_modules/splicemachine/mlflow_support/constants.html#FileExtensions.get_valid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.constants.FileExtensions.get_valid" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a tuple of the valid file extensions
in Database
:return: (tuple) valid statuses</p>
</dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.FileExtensions.h2o">
<code class="sig-name descname">h2o</code><em class="property">: str</em><em class="property"> = 'h2o'</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.FileExtensions.h2o" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.FileExtensions.keras">
<code class="sig-name descname">keras</code><em class="property">: str</em><em class="property"> = 'h5'</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.FileExtensions.keras" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.FileExtensions.sklearn">
<code class="sig-name descname">sklearn</code><em class="property">: str</em><em class="property"> = 'pkl'</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.FileExtensions.sklearn" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.FileExtensions.spark">
<code class="sig-name descname">spark</code><em class="property">: str</em><em class="property"> = 'spark'</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.FileExtensions.spark" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="splicemachine.mlflow_support.constants.H2OModelType">
<em class="property">class </em><code class="sig-prename descclassname">splicemachine.mlflow_support.constants.</code><code class="sig-name descname">H2OModelType</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/constants.html#H2OModelType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.constants.H2OModelType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>An enumeration.</p>
<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.H2OModelType.CLASSIFICATION">
<code class="sig-name descname">CLASSIFICATION</code><em class="property"> = 2</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.H2OModelType.CLASSIFICATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.H2OModelType.KEY_VALUE">
<code class="sig-name descname">KEY_VALUE</code><em class="property"> = 3</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.H2OModelType.KEY_VALUE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.H2OModelType.REGRESSION">
<code class="sig-name descname">REGRESSION</code><em class="property"> = 0</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.H2OModelType.REGRESSION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.H2OModelType.SINGULAR">
<code class="sig-name descname">SINGULAR</code><em class="property"> = 1</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.H2OModelType.SINGULAR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="splicemachine.mlflow_support.constants.KerasModelType">
<em class="property">class </em><code class="sig-prename descclassname">splicemachine.mlflow_support.constants.</code><code class="sig-name descname">KerasModelType</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/constants.html#KerasModelType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.constants.KerasModelType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Model Types for SKLearn models
Sklearn isn’t as well defined in their model categories, so we are going to classify them by their return values</p>
<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.KerasModelType.KEY_VALUE">
<code class="sig-name descname">KEY_VALUE</code><em class="property"> = 1</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.KerasModelType.KEY_VALUE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.KerasModelType.REGRESSION">
<code class="sig-name descname">REGRESSION</code><em class="property"> = 0</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.KerasModelType.REGRESSION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="splicemachine.mlflow_support.constants.ModelStatuses">
<em class="property">class </em><code class="sig-prename descclassname">splicemachine.mlflow_support.constants.</code><code class="sig-name descname">ModelStatuses</code><a class="reference internal" href="_modules/splicemachine/mlflow_support/constants.html#ModelStatuses"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.constants.ModelStatuses" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class containing names
for In Database Model Deployments</p>
<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.ModelStatuses.SUPPORTED_STATUSES">
<code class="sig-name descname">SUPPORTED_STATUSES</code><em class="property"> = ['DEPLOYED', 'DELETED']</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.ModelStatuses.SUPPORTED_STATUSES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.ModelStatuses.deleted">
<code class="sig-name descname">deleted</code><em class="property">: str</em><em class="property"> = 'DELETED'</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.ModelStatuses.deleted" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.ModelStatuses.deployed">
<code class="sig-name descname">deployed</code><em class="property">: str</em><em class="property"> = 'DEPLOYED'</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.ModelStatuses.deployed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="splicemachine.mlflow_support.constants.SklearnModelType">
<em class="property">class </em><code class="sig-prename descclassname">splicemachine.mlflow_support.constants.</code><code class="sig-name descname">SklearnModelType</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/constants.html#SklearnModelType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.constants.SklearnModelType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Model Types for SKLearn models
Sklearn isn’t as well defined in their model categories, so we are going to classify them by their return values</p>
<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.SklearnModelType.KEY_VALUE">
<code class="sig-name descname">KEY_VALUE</code><em class="property"> = 2</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.SklearnModelType.KEY_VALUE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.SklearnModelType.POINT_PREDICTION_CLF">
<code class="sig-name descname">POINT_PREDICTION_CLF</code><em class="property"> = 1</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.SklearnModelType.POINT_PREDICTION_CLF" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.SklearnModelType.REGRESSION">
<code class="sig-name descname">REGRESSION</code><em class="property"> = 0</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.SklearnModelType.REGRESSION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="splicemachine.mlflow_support.constants.SparkModelType">
<em class="property">class </em><code class="sig-prename descclassname">splicemachine.mlflow_support.constants.</code><code class="sig-name descname">SparkModelType</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/constants.html#SparkModelType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.constants.SparkModelType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Model types for MLeap Deployment to DB</p>
<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.SparkModelType.CLASSIFICATION">
<code class="sig-name descname">CLASSIFICATION</code><em class="property"> = 0</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.SparkModelType.CLASSIFICATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.SparkModelType.CLUSTERING_WITH_PROB">
<code class="sig-name descname">CLUSTERING_WITH_PROB</code><em class="property"> = 2</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.SparkModelType.CLUSTERING_WITH_PROB" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.SparkModelType.CLUSTERING_WO_PROB">
<code class="sig-name descname">CLUSTERING_WO_PROB</code><em class="property"> = 3</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.SparkModelType.CLUSTERING_WO_PROB" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.constants.SparkModelType.REGRESSION">
<code class="sig-name descname">REGRESSION</code><em class="property"> = 1</em><a class="headerlink" href="#splicemachine.mlflow_support.constants.SparkModelType.REGRESSION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-splicemachine.mlflow_support.mlflow_support">
<span id="splicemachine-mlflow-support-mlflow-support-module"></span><h2>splicemachine.mlflow_support.mlflow_support module<a class="headerlink" href="#module-splicemachine.mlflow_support.mlflow_support" title="Permalink to this headline">¶</a></h2>
<p>Copyright 2020 Splice Machine, Inc.</p>
<p>Licensed under the Apache License, Version 2.0 (the “License”);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<blockquote>
<div><p><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
</div></blockquote>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._current_exp_id">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_current_exp_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_current_exp_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._current_exp_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the current exp id</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(int) the current experiment id</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._current_run_id">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_current_run_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_current_run_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._current_run_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the current run id</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(str) the current run id</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._deploy_aws">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_deploy_aws</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">app_name</span></em>, <em class="sig-param"><span class="n">region</span><span class="o">=</span><span class="default_value">'us-east-2'</span></em>, <em class="sig-param"><span class="n">instance_type</span><span class="o">=</span><span class="default_value">'ml.m5.xlarge'</span></em>, <em class="sig-param"><span class="n">run_id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">instance_count</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">deployment_mode</span><span class="o">=</span><span class="default_value">'replace'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_deploy_aws"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._deploy_aws" title="Permalink to this definition">¶</a></dt>
<dd><p>Queue Job to deploy a run to sagemaker with the
given run id (found in MLFlow UI or through search API)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>run_id</strong> – the id of the run to deploy. Will default to the current
run id.</p></li>
<li><p><strong>app_name</strong> – the name of the app in sagemaker once deployed</p></li>
<li><p><strong>region</strong> – the sagemaker region to deploy to (us-east-2,
us-west-1, us-west-2, eu-central-1 supported)</p></li>
<li><p><strong>instance_type</strong> – the EC2 Sagemaker instance type to deploy on
(ml.m4.xlarge supported)</p></li>
<li><p><strong>instance_count</strong> – the number of instances to load balance predictions
on</p></li>
<li><p><strong>deployment_mode</strong> – the method to deploy; create=application will fail
if an app with the name specified already exists; replace=application
in sagemaker will be replaced with this one if app already exists;
add=add the specified model to a prexisting application (not recommended)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._deploy_azure">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_deploy_azure</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">endpoint_name</span></em>, <em class="sig-param"><span class="n">resource_group</span></em>, <em class="sig-param"><span class="n">workspace</span></em>, <em class="sig-param"><span class="n">run_id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">region</span><span class="o">=</span><span class="default_value">'East US'</span></em>, <em class="sig-param"><span class="n">cpu_cores</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">allocated_ram</span><span class="o">=</span><span class="default_value">0.5</span></em>, <em class="sig-param"><span class="n">model_name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_deploy_azure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._deploy_azure" title="Permalink to this definition">¶</a></dt>
<dd><p>Deploy a given run to AzureML.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>endpoint_name</strong> – (str) the name of the endpoint in AzureML when deployed to
Azure Container Services. Must be unique.</p></li>
<li><p><strong>resource_group</strong> – (str) Azure Resource Group for model. Automatically created if
it doesn’t exist.</p></li>
<li><p><strong>workspace</strong> – (str) the AzureML workspace to deploy the model under.
Will be created if it doesn’t exist</p></li>
<li><p><strong>run_id</strong> – (str) if specified, will deploy a previous run (
must have an spark model logged). Otherwise, will default to the active run</p></li>
<li><p><strong>region</strong> – (str) AzureML Region to deploy to: Can be East US, East US 2, Central US,
West US 2, North Europe, West Europe or Japan East</p></li>
<li><p><strong>cpu_cores</strong> – (float) Number of CPU Cores to allocate to the instance.
Can be fractional. Default=0.1</p></li>
<li><p><strong>allocated_ram</strong> – (float) amount of RAM, in GB, allocated to the container.
Default=0.5</p></li>
<li><p><strong>model_name</strong> – (str) If specified, this will be the name of the model in AzureML.
Otherwise, the model name will be randomly generated.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._deploy_db">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_deploy_db</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">db_schema_name</span></em>, <em class="sig-param"><span class="n">db_table_name</span></em>, <em class="sig-param"><span class="n">run_id</span></em>, <em class="sig-param"><span class="n">primary_key</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">df</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">create_model_table</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">model_cols</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">classes</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sklearn_args</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">pred_threshold</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">replace</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_deploy_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._deploy_db" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Deploy a trained (currently Spark, Sklearn, Keras or H2O) model to the Database.
This either creates a new table or alters an existing table in the database (depending on parameters passed)</p>
<dl class="field-list simple">
<dt class="field-odd">param db_schema_name</dt>
<dd class="field-odd"><p>(str) the schema name to deploy to.</p>
</dd>
<dt class="field-even">param db_table_name</dt>
<dd class="field-even"><p>(str) the table name to deploy to.</p>
</dd>
<dt class="field-odd">param run_id</dt>
<dd class="field-odd"><p>(str) The run_id to deploy the model on. The model associated with this run will be deployed</p>
</dd>
</dl>
</div></blockquote>
<p>OPTIONAL PARAMETERS</p>
<blockquote>
<div><dl class="field-list">
<dt class="field-odd">param primary_key</dt>
<dd class="field-odd"><p>(List[Tuple[str, str]]) List of column + SQL datatype to use for the primary/composite key.</p>
<ul class="simple">
<li><p>If you are deploying to a table that already exists, it must already have a primary key, and this parameter will be ignored.</p></li>
<li><p>If you are creating the table in this function, you MUST pass in a primary key</p></li>
</ul>
</dd>
<dt class="field-even">param df</dt>
<dd class="field-even"><p>(Spark or Pandas DF) The dataframe used to train the model</p>
<div class="line-block">
<div class="line">NOTE: The columns in this df are the ones that will be used to create the table unless specified by model_cols</div>
</div>
</dd>
<dt class="field-odd">param create_model_table</dt>
<dd class="field-odd"><p>Whether or not to create the table from the dataframe. Default false. This
Will ONLY be used if the table does not exist and a dataframe is passed in</p>
</dd>
<dt class="field-even">param model_cols</dt>
<dd class="field-even"><p>(List[str]) The columns from the table to use for the model. If None, all columns in the table
will be passed to the model. If specified, the columns will be passed to the model
IN THAT ORDER. The columns passed here must exist in the table.</p>
</dd>
<dt class="field-odd">param classes</dt>
<dd class="field-odd"><p>(List[str]) The classes (prediction labels) for the model being deployed.</p>
<p>NOTE: If not supplied, the table will have default column names for each class</p>
</dd>
<dt class="field-even">param sklearn_args</dt>
<dd class="field-even"><p>(dict{str: str}) Prediction options for sklearn models:</p>
<ul>
<li><p>Available key value options:</p>
<blockquote>
<div><ul>
<li><p>‘predict_call’: ‘predict’, ‘predict_proba’, or ‘transform’</p>
<blockquote>
<div><ul>
<li><p>Determines the function call for the model</p>
<blockquote>
<div><ul class="simple">
<li><p>If blank, predict will be used (or transform if model doesn’t have predict)</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p>‘predict_args’: ‘return_std’ or ‘return_cov’ - For Bayesian and Gaussian models</p>
<blockquote>
<div><ul>
<li><p>Only one can be specified</p>
<blockquote>
<div><ul class="simple">
<li><p>If the model does not have the option specified, it will be ignored.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</dd>
<dt class="field-odd">param verbose</dt>
<dd class="field-odd"><p>(bool) Whether or not to print out the queries being created. Helpful for debugging</p>
</dd>
<dt class="field-even">param pred_threshold</dt>
<dd class="field-even"><p>(double) A prediction threshold for <em>Keras</em> binary classification models</p>
<ul class="simple">
<li><p>If the model type isn’t Keras, this parameter will be ignored</p></li>
</ul>
<p>NOTE: If the model type is Keras, the output layer has 1 node, and pred_threshold is None,                 you will NOT receive a class prediction, only the output of the final layer (like model.predict()).                 If you want a class prediction                 for your binary classification problem, you MUST pass in a threshold.</p>
</dd>
<dt class="field-odd">param replace</dt>
<dd class="field-odd"><p>(bool) whether or not to replace a currently existing model. This param does not yet work</p>
</dd>
</dl>
<p>This function creates the following IF you are creating a table from the dataframe:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>The model table where run_id is the run_id passed in. This table will have a column for each feature in the feature vector. It will also contain:</dt><dd><ul>
<li><p>USER which is the current user who made the request</p></li>
<li><p>EVAL_TIME which is the CURRENT_TIMESTAMP</p></li>
<li><p>the PRIMARY KEY column same as the DATA table to link predictions to rows in the table (primary key)</p></li>
<li><p>PREDICTION. The prediction of the model. If the :classes: param is not filled in, this will be default values for classification models</p></li>
<li><p>A column for each class of the predictor with the value being the probability/confidence of the model if applicable</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>IF you are deploying to an existing table, the table will be altered to include the columns above.</p>
<p>The following will also be created for all deployments:</p>
<blockquote>
<div><ul class="simple">
<li><p>A trigger that runs on (after) insertion to the data table that runs an INSERT into the prediction table,             calling the PREDICT function, passing in the row of data as well as the schema of the dataset, and the run_id of the model to run</p></li>
<li><p>A trigger that runs on (after) insertion to the prediction table that calls an UPDATE to the row inserted,             parsing the prediction probabilities and filling in proper column values</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">return</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._download_artifact">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_download_artifact</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">local_path</span></em>, <em class="sig-param"><span class="n">run_id</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_download_artifact"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._download_artifact" title="Permalink to this definition">¶</a></dt>
<dd><p>Download the artifact at the given run id (active default) + name to the local path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – (str) artifact name to load (with respect to the run)</p></li>
<li><p><strong>local_path</strong> – (str) local path to download the model to. This path MUST include the file extension</p></li>
<li><p><strong>run_id</strong> – (str) the run id to download the artifact from. Defaults to active run</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._get_current_run_data">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_get_current_run_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_get_current_run_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._get_current_run_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the data associated with the current run.
As of MLFLow 1.6, it currently does not support getting run info from the mlflow.active_run object, so we need it
to be retrieved via the tracking client.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>active run data object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._get_deployed_models">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_get_deployed_models</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; pandas.core.frame.DataFrame<a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_get_deployed_models"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._get_deployed_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the currently deployed models in the database
:return: Pandas df</p>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._get_model_name">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_get_model_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">run_id</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_get_model_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._get_model_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the model name associated with a run or None</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>run_id</strong> – (str) the run_id that the model is stored under</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(str or None) The model name if it exists</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._get_run_ids_by_name">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_get_run_ids_by_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">run_name</span></em>, <em class="sig-param"><span class="n">experiment_id</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_get_run_ids_by_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._get_run_ids_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a run id from the run name. If there are multiple runs with the same name, all run IDs are returned</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>run_name</strong> – (str) The name of the run</p></li>
<li><p><strong>experiment_id</strong> – (int) The experiment to search in. If None, all experiments are searched. [Default None]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(List[str]) List of run ids</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._initiate_job">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_initiate_job</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">payload</span></em>, <em class="sig-param"><span class="n">endpoint</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_initiate_job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._initiate_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a job to the initiation endpoint</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>payload</strong> – (dict) JSON payload for POST request</p></li>
<li><p><strong>endpoint</strong> – (str) REST endpoint to target</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(str) Response text from request</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._lm">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_lm</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">step</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_lm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._lm" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a shortcut for logging metrics in MLFlow.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – (str) key for the parameter</p></li>
<li><p><strong>value</strong> – (str or int) value for the parameter</p></li>
<li><p><strong>step</strong> – (int) A single integer step at which to log the specified Metrics. If unspecified, each metric is logged at step zero.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._load_model">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_load_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">run_id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_load_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._load_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Download and deserialize a serialized model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>run_id</strong> – the id of the run to get a model from
(the run must have an associated model with it named spark_model)</p></li>
<li><p><strong>name</strong> – the name of the model in the database</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._log_artifact">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_log_artifact</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">run_uuid</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_log_artifact"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._log_artifact" title="Permalink to this definition">¶</a></dt>
<dd><p>Log an artifact for the active run</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mlflow</span><span class="o">.</span><span class="n">log_artifact</span><span class="p">(</span><span class="s1">&#39;my_image.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> – (str) the name of the file name to log</p></li>
<li><p><strong>name</strong> – (str) the name of the run relative name to store the model under</p></li>
<li><p><strong>run_uuid</strong> – (str) the run uuid of a previous run, if none, defaults to current run</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">NOTE</dt>
<dd class="field-odd"><p>We do not currently support logging directories. If you would like to log a directory, please zip it first and log the zip file</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._log_feature_transformations">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_log_feature_transformations</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unfit_pipeline</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_log_feature_transformations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._log_feature_transformations" title="Permalink to this definition">¶</a></dt>
<dd><p>Log feature transformations for an unfit spark pipeline
Logs –&gt; feature movement through the pipeline</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>unfit_pipeline</strong> – (PipelineModel) unfit spark pipeline to log</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._log_model">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_log_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">'model'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_log_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._log_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Log a trained machine learning model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – (Model) is the trained Spark/SKlearn/H2O/Keras model
with the current run</p></li>
<li><p><strong>name</strong> – (str) the run relative name to store the model under. [Deault ‘model’]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._log_model_params">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_log_model_params</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pipeline_or_model</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_log_model_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._log_model_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Log the parameters of a fitted spark model or a model stage of a fitted spark pipeline</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pipeline_or_model</strong> – fitted spark pipeline/fitted spark model</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._log_pipeline_stages">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_log_pipeline_stages</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pipeline</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_log_pipeline_stages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._log_pipeline_stages" title="Permalink to this definition">¶</a></dt>
<dd><p>Log the pipeline stages of a Spark Pipeline as params for the run</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pipeline</strong> – (PipelineModel) fitted/unitted pipeline</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._login_director">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_login_director</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">username</span></em>, <em class="sig-param"><span class="n">password</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_login_director"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._login_director" title="Permalink to this definition">¶</a></dt>
<dd><p>Authenticate into the MLManager Director</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>username</strong> – (str) database username</p></li>
<li><p><strong>password</strong> – (str) database password</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._lp">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_lp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_lp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._lp" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a shortcut for logging parameters in MLFlow.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – (str) key for the parameter</p></li>
<li><p><strong>value</strong> – (str) value for the parameter</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._mlflow_patch">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_mlflow_patch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_mlflow_patch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._mlflow_patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a MLFlow Patch that applies the default gorilla settings</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – destination name under mlflow package</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>decorator for patched function</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._register_splice_context">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_register_splice_context</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_register_splice_context"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._register_splice_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a Splice Context for Spark/Database operations (artifact storage, for example)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>splice_context</strong> – (PySpliceContext) splice context to input</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._start_run">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_start_run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">run_id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tags</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">experiment_id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">run_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nested</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_start_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._start_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Start a new run</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">(</span><span class="n">run_name</span><span class="o">=</span><span class="s1">&#39;my_run&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">(</span><span class="n">run_name</span><span class="o">=</span><span class="s1">&#39;my_run&#39;</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tags</strong> – a dictionary containing metadata about the current run.         For example:             {                 ‘team’: ‘pd’,                 ‘purpose’: ‘r&amp;d’             }</p></li>
<li><p><strong>run_name</strong> – (str) an optional name for the run to show up in the MLFlow UI. [Default None]</p></li>
<li><p><strong>run_id</strong> – (str) if you want to reincarnate an existing run, pass in the run id [Default None]</p></li>
<li><p><strong>experiment_id</strong> – (int) if you would like to create an experiment/use one for this run [Default None]</p></li>
<li><p><strong>nested</strong> – (bool) Controls whether run is nested in parent run. True creates a nest run [Default False]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(ActiveRun) the mlflow active run object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support._timer">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">_timer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timer_name</span></em>, <em class="sig-param"><span class="n">param</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#_timer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support._timer" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager for logging</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s1">&#39;my_timer&#39;</span><span class="p">):</span> 

    <span class="o">...</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timer_name</strong> – (str) the name of the timer</p></li>
<li><p><strong>param</strong> – (bool) whether or not to log the timer as a param (default=True). If false, logs as metric.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support.apply_patches">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">apply_patches</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#apply_patches"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support.apply_patches" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply all the Gorilla Patches;     All Gorilla Patched MUST be predixed with ‘_’ before their destination in MLflow</p>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.mlflow_support.main">
<code class="sig-prename descclassname">splicemachine.mlflow_support.mlflow_support.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/mlflow_support.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.mlflow_support.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-splicemachine.mlflow_support.utilities">
<span id="splicemachine-mlflow-support-utilities-module"></span><h2>splicemachine.mlflow_support.utilities module<a class="headerlink" href="#module-splicemachine.mlflow_support.utilities" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="splicemachine.mlflow_support.utilities.H2OUtils">
<em class="property">class </em><code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">H2OUtils</code><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#H2OUtils"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.H2OUtils" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.H2OUtils.get_h2omojo_model">
<em class="property">static </em><code class="sig-name descname">get_h2omojo_model</code><span class="sig-paren">(</span><em class="sig-param">splice_context: splicemachine.spark.context.PySpliceContext</em>, <em class="sig-param">model: h2o.model.model_base.ModelBase) -&gt; (&lt;class 'object'&gt;</em>, <em class="sig-param">&lt;class 'object'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#H2OUtils.get_h2omojo_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.H2OUtils.get_h2omojo_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.H2OUtils.get_model_type">
<em class="property">static </em><code class="sig-name descname">get_model_type</code><span class="sig-paren">(</span><em class="sig-param">h2omojo: object) -&gt; (&lt;enum 'H2OModelType'&gt;</em>, <em class="sig-param">&lt;class 'str'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#H2OUtils.get_model_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.H2OUtils.get_model_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.H2OUtils.insert_h2omojo_model">
<em class="property">static </em><code class="sig-name descname">insert_h2omojo_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">object</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#H2OUtils.insert_h2omojo_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.H2OUtils.insert_h2omojo_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.H2OUtils.load_h2o_model">
<em class="property">static </em><code class="sig-name descname">load_h2o_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model_blob</span><span class="p">:</span> <span class="n">bytes</span></em><span class="sig-paren">)</span> &#x2192; h2o.model.model_base.ModelBase<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#H2OUtils.load_h2o_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.H2OUtils.load_h2o_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.H2OUtils.log_h2o_model">
<em class="property">static </em><code class="sig-name descname">log_h2o_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">object</span></em>, <em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#H2OUtils.log_h2o_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.H2OUtils.log_h2o_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.H2OUtils.prep_model_for_deployment">
<em class="property">static </em><code class="sig-name descname">prep_model_for_deployment</code><span class="sig-paren">(</span><em class="sig-param">splice_context: splicemachine.spark.context.PySpliceContext, model: h2o.model.model_base.ModelBase, classes: List[str], run_id: str, df: pyspark.sql.dataframe.DataFrame, pred_threshold: float, sklearn_args: Dict[str, str]) -&gt; (&lt;enum 'H2OModelType'&gt;, typing.List[str]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#H2OUtils.prep_model_for_deployment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.H2OUtils.prep_model_for_deployment" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the H2O mojo model
Gets the model type
Inserts the raw model into the MODELS table
gets the classes (if applicable)
returns the model type and classes
:param splice_context:
:param model:
:param classes:
:param run_id:
:return:</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="splicemachine.mlflow_support.utilities.KerasUtils">
<em class="property">class </em><code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">KerasUtils</code><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#KerasUtils"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.KerasUtils" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.KerasUtils.get_keras_model_type">
<em class="property">static </em><code class="sig-name descname">get_keras_model_type</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">tensorflow.python.keras.engine.training.Model</span></em>, <em class="sig-param"><span class="n">pred_threshold</span><span class="p">:</span> <span class="n">float</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#splicemachine.mlflow_support.constants.KerasModelType" title="splicemachine.mlflow_support.constants.KerasModelType">splicemachine.mlflow_support.constants.KerasModelType</a><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#KerasUtils.get_keras_model_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.KerasUtils.get_keras_model_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Keras models are either Key value returns or “regression” (single value)
If the output layer has multiple nodes, or there is a threshold (for binary classification), it will
be a key value return because n values will be returned (n = # output nodes + 1)
:param model: (KerasModel)
:param pred_threshold: (float) the prediction threshold if one is passed
:return: (KerasModelType)</p>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.KerasUtils.insert_keras_model">
<em class="property">static </em><code class="sig-name descname">insert_keras_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">tensorflow.python.keras.engine.training.Model</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#KerasUtils.insert_keras_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.KerasUtils.insert_keras_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Inserts the Keras Model into the MLManager Models table for deployment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_context</strong> – </p></li>
<li><p><strong>run_id</strong> – </p></li>
<li><p><strong>model</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.KerasUtils.load_keras_model">
<em class="property">static </em><code class="sig-name descname">load_keras_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model_blob</span><span class="p">:</span> <span class="n">object</span></em><span class="sig-paren">)</span> &#x2192; tensorflow.python.keras.engine.training.Model<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#KerasUtils.load_keras_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.KerasUtils.load_keras_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Deserializes the serialized Keras Model blob</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model_blob</strong> – (object) the model blob</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>KerasModel</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.KerasUtils.log_keras_model">
<em class="property">static </em><code class="sig-name descname">log_keras_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">tensorflow.python.keras.engine.training.Model</span></em>, <em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#KerasUtils.log_keras_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.KerasUtils.log_keras_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Logs the Keras Model in the MLManager Aritfacts table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_context</strong> – (PySpliceContext)</p></li>
<li><p><strong>model</strong> – (KerasModel)</p></li>
<li><p><strong>name</strong> – (str) The name to give the model</p></li>
<li><p><strong>run_id</strong> – (str) The mlflow run id</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.KerasUtils.prep_model_for_deployment">
<em class="property">static </em><code class="sig-name descname">prep_model_for_deployment</code><span class="sig-paren">(</span><em class="sig-param">splice_context: splicemachine.spark.context.PySpliceContext, model: tensorflow.python.keras.engine.training.Model, classes: List[str], run_id: str, df: pyspark.sql.dataframe.DataFrame, pred_threshold: float, sklearn_args: Dict[str, str]) -&gt; (&lt;enum 'KerasModelType'&gt;, typing.List[str]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#KerasUtils.prep_model_for_deployment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.KerasUtils.prep_model_for_deployment" title="Permalink to this definition">¶</a></dt>
<dd><p>Inserts the model into the MODELS table for deployment
Gets the Keras model type
Gets the classes (if applicable)
:param splice_context: PySpliceContext
:param model: KerasModel
:param classes: List[str] the class labels
:param run_id: str
:param pred_threshold: double
:return: (KerasModelType, List[str]) the modelType and the classes</p>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.KerasUtils.validate_keras_model">
<em class="property">static </em><code class="sig-name descname">validate_keras_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">tensorflow.python.keras.engine.training.Model</span></em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#KerasUtils.validate_keras_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.KerasUtils.validate_keras_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Right now, we only support feed forward models. Vector inputs and Vector outputs only
When we move to LSTMs we will need to change that
:param model:
:return:</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="splicemachine.mlflow_support.utilities.SKUtils">
<em class="property">class </em><code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">SKUtils</code><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SKUtils"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SKUtils" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SKUtils.get_model_type">
<em class="property">static </em><code class="sig-name descname">get_model_type</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">sklearn.base.BaseEstimator</span></em>, <em class="sig-param"><span class="n">sklearn_args</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#splicemachine.mlflow_support.constants.SklearnModelType" title="splicemachine.mlflow_support.constants.SklearnModelType">splicemachine.mlflow_support.constants.SklearnModelType</a><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SKUtils.get_model_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SKUtils.get_model_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the model type of the Scikit-learn model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – (ScikitModel)</p></li>
<li><p><strong>sklearn_args</strong> – (Dict[str,str]) the optional scikit-learn args</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SklearnModelType</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SKUtils.get_pipeline_model_type">
<em class="property">static </em><code class="sig-name descname">get_pipeline_model_type</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pipeline</span><span class="p">:</span> <span class="n">sklearn.pipeline.Pipeline</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#splicemachine.mlflow_support.constants.SklearnModelType" title="splicemachine.mlflow_support.constants.SklearnModelType">splicemachine.mlflow_support.constants.SklearnModelType</a><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SKUtils.get_pipeline_model_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SKUtils.get_pipeline_model_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the type of model in the Sklearn Pipeline</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pipeline</strong> – The Sklearn Pipeline</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SKlearnModelType</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SKUtils.insert_sklearn_model">
<em class="property">static </em><code class="sig-name descname">insert_sklearn_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">sklearn.base.BaseEstimator</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SKUtils.insert_sklearn_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SKUtils.insert_sklearn_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SKUtils.load_sklearn_model">
<em class="property">static </em><code class="sig-name descname">load_sklearn_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model_blob</span><span class="p">:</span> <span class="n">bytes</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SKUtils.load_sklearn_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SKUtils.load_sklearn_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SKUtils.log_sklearn_model">
<em class="property">static </em><code class="sig-name descname">log_sklearn_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">sklearn.base.BaseEstimator</span></em>, <em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SKUtils.log_sklearn_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SKUtils.log_sklearn_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SKUtils.prep_model_for_deployment">
<em class="property">static </em><code class="sig-name descname">prep_model_for_deployment</code><span class="sig-paren">(</span><em class="sig-param">splice_context: splicemachine.spark.context.PySpliceContext, model: sklearn.base.BaseEstimator, classes: List[str], run_id: str, df: pyspark.sql.dataframe.DataFrame, pred_threshold: float, sklearn_args: Dict[str, str]) -&gt; (&lt;enum 'SklearnModelType'&gt;, typing.List[str], &lt;class 'bool'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SKUtils.prep_model_for_deployment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SKUtils.prep_model_for_deployment" title="Permalink to this definition">¶</a></dt>
<dd><p>Preperatory steps to deploy a scikit-learn model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_context</strong> – (PySpliceContext)</p></li>
<li><p><strong>model</strong> – (ScikitModel)</p></li>
<li><p><strong>classes</strong> – (List[str]) The label names for the model</p></li>
<li><p><strong>run_id</strong> – (str) the run_id being deployed under</p></li>
<li><p><strong>df</strong> – (SparkDF or None) the spark dataframe if necessary</p></li>
<li><p><strong>pred_threshold</strong> – (None) unused in this abstract method implementation</p></li>
<li><p><strong>sklearn_args</strong> – (Dict[str,str]) The optional sklearn args</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(SklearnModelType, List[str], bool) the model_type, classes, and model_already_exists</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SKUtils.validate_sklearn_args">
<em class="property">static </em><code class="sig-name descname">validate_sklearn_args</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">sklearn.base.BaseEstimator</span></em>, <em class="sig-param"><span class="n">sklearn_args</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Dict<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SKUtils.validate_sklearn_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SKUtils.validate_sklearn_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure sklearn args contains valid values. sklearn_args can only contain 2 keys:
predict_call and predict_args.
predict_call: ‘predict’/’predict_proba’/’transform’
predict_args: ‘return_std’/’return_cov’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – (ScikitModel)</p></li>
<li><p><strong>sklearn_args</strong> – (Dict[str, str])</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(Dict[str, str]) sklearn_args</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="splicemachine.mlflow_support.utilities.SQL">
<em class="property">class </em><code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">SQL</code><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SQL"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SQL" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt id="splicemachine.mlflow_support.utilities.SQL.ARTIFACT_INSERT_SQL">
<code class="sig-name descname">ARTIFACT_INSERT_SQL</code><em class="property"> = 'INSERT INTO MLMANAGER.ARTIFACTS (run_uuid, name, &quot;size&quot;, &quot;binary&quot;, file_extension) VALUES (?, ?, ?, ?, ?)'</em><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SQL.ARTIFACT_INSERT_SQL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.utilities.SQL.ARTIFACT_RETRIEVAL_SQL">
<code class="sig-name descname">ARTIFACT_RETRIEVAL_SQL</code><em class="property"> = 'SELECT &quot;binary&quot;, file_extension FROM MLMANAGER.ARTIFACTS WHERE name=\'{name}\' AND run_uuid=\'{runid}\''</em><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SQL.ARTIFACT_RETRIEVAL_SQL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.utilities.SQL.MLMANAGER_SCHEMA">
<code class="sig-name descname">MLMANAGER_SCHEMA</code><em class="property"> = 'MLMANAGER'</em><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SQL.MLMANAGER_SCHEMA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.utilities.SQL.MODEL_INSERT_SQL">
<code class="sig-name descname">MODEL_INSERT_SQL</code><em class="property"> = 'INSERT INTO MLMANAGER.MODELS(RUN_UUID, MODEL, LIBRARY, &quot;version&quot;) VALUES (?, ?, ?, ?)'</em><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SQL.MODEL_INSERT_SQL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="splicemachine.mlflow_support.utilities.SQL.MODEL_RETRIEVAL_SQL">
<code class="sig-name descname">MODEL_RETRIEVAL_SQL</code><em class="property"> = &quot;SELECT MODEL FROM {MLMANAGER_SCHEMA}.MODELS WHERE RUN_UUID='{run_uuid}'&quot;</em><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SQL.MODEL_RETRIEVAL_SQL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="splicemachine.mlflow_support.utilities.SparkUtils">
<em class="property">class </em><code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">SparkUtils</code><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SparkUtils"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SparkUtils" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SparkUtils.get_cols">
<em class="property">static </em><code class="sig-name descname">get_cols</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">transformer</span></em>, <em class="sig-param"><span class="n">get_input</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SparkUtils.get_cols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SparkUtils.get_cols" title="Permalink to this definition">¶</a></dt>
<dd><p>Get columns from a transformer</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transformer</strong> – the transformer (fit or unfit)</p></li>
<li><p><strong>get_input</strong> – whether or not to return the input columns</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of either input or output columns</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SparkUtils.get_feature_vector_columns">
<em class="property">static </em><code class="sig-name descname">get_feature_vector_columns</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fittedPipe</span><span class="p">:</span> <span class="n">pyspark.ml.pipeline.PipelineModel</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SparkUtils.get_feature_vector_columns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SparkUtils.get_feature_vector_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the input columns from the VectorAssembler stage of a fitted Pipeline</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fittedPipe</strong> – (PipelineModel) The trained model</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List[str] the feature vector columns</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SparkUtils.get_model_stage">
<em class="property">static </em><code class="sig-name descname">get_model_stage</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pipeline</span><span class="p">:</span> <span class="n">pyspark.ml.pipeline.PipelineModel</span></em><span class="sig-paren">)</span> &#x2192; pyspark.ml.base.Model<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SparkUtils.get_model_stage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SparkUtils.get_model_stage" title="Permalink to this definition">¶</a></dt>
<dd><p>”
Gets the Model stage of a FIT PipelineModel</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pipeline</strong> – (PipelineModel)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SparkModel</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SparkUtils.get_model_type">
<em class="property">static </em><code class="sig-name descname">get_model_type</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pipeline_or_model</span><span class="p">:</span> <span class="n">pyspark.ml.base.Model</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#splicemachine.mlflow_support.constants.SparkModelType" title="splicemachine.mlflow_support.constants.SparkModelType">splicemachine.mlflow_support.constants.SparkModelType</a><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SparkUtils.get_model_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SparkUtils.get_model_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a fitted Spark Pipeline or Model and determines if it is a Regression, Classification, or Clustering model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pipeline_or_model</strong> – (SparkModel or PipelineModel) the fitted Spark model</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SparkUtils.get_num_classes">
<em class="property">static </em><code class="sig-name descname">get_num_classes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pipeline_or_model</span><span class="p">:</span> <span class="n">pyspark.ml.base.Model</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SparkUtils.get_num_classes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SparkUtils.get_num_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to find the number of classes in a Pipeline or Model object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pipeline_or_model</strong> – The Pipeline or Model object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SparkUtils.get_stages">
<em class="property">static </em><code class="sig-name descname">get_stages</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pipeline</span><span class="p">:</span> <span class="n">pyspark.ml.pipeline.PipelineModel</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SparkUtils.get_stages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SparkUtils.get_stages" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the stages from a fit or unfit pipeline</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pipeline</strong> – a fit or unfit Spark pipeline</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>stages list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SparkUtils.is_spark_pipeline">
<em class="property">static </em><code class="sig-name descname">is_spark_pipeline</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spark_object</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SparkUtils.is_spark_pipeline"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SparkUtils.is_spark_pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns whether or not the given object is a spark pipeline. If it is a Pipeline, it will return True, if it is a
model is will return False. Otherwise, it will throw an exception</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>spark_object</strong> – (Model) Spark object to check</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(bool) whether or not the object is a model</p>
</dd>
<dt class="field-odd">Exception</dt>
<dd class="field-odd"><p>(SpliceMachineException) throws an error if it is not either</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SparkUtils.load_spark_model">
<em class="property">static </em><code class="sig-name descname">load_spark_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_ctx</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">spark_pipeline_blob</span><span class="p">:</span> <span class="n">object</span></em><span class="sig-paren">)</span> &#x2192; pyspark.ml.base.Model<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SparkUtils.load_spark_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SparkUtils.load_spark_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a Serialized Spark Model into a Spark Pipeline</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_ctx</strong> – (PySpliceContext) The PySpliceContext</p></li>
<li><p><strong>spark_pipeline_blob</strong> – (object) The serialized model object</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(SparkModel) The deserialized Spark model pipeline</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SparkUtils.log_spark_model">
<em class="property">static </em><code class="sig-name descname">log_spark_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">pyspark.ml.base.Model</span></em>, <em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SparkUtils.log_spark_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SparkUtils.log_spark_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Inserts a Serialized spark model into the database as an artifact</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_context</strong> – (PySpliceContext) The PySpliceContext</p></li>
<li><p><strong>model</strong> – (SparkModel) the trained Spark model</p></li>
<li><p><strong>name</strong> – (str) the name to give the saved model</p></li>
<li><p><strong>run_id</strong> – (str) the run id associated to associate to this model</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(None)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SparkUtils.parse_string_parameters">
<em class="property">static </em><code class="sig-name descname">parse_string_parameters</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string_parameters</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Dict<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SparkUtils.parse_string_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SparkUtils.parse_string_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse string rendering of extractParamMap</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>string_parameters</strong> – (str) the string parameters</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dict the parsed parameters</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SparkUtils.prep_model_for_deployment">
<em class="property">static </em><code class="sig-name descname">prep_model_for_deployment</code><span class="sig-paren">(</span><em class="sig-param">splice_context: splicemachine.spark.context.PySpliceContext, fittedPipe: pyspark.ml.pipeline.PipelineModel, classes: List[str], run_id: str, df: pyspark.sql.dataframe.DataFrame, pred_threshold: float, sklearn_args: Dict[str, str]) -&gt; (&lt;enum 'SparkModelType'&gt;, typing.List[str]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SparkUtils.prep_model_for_deployment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SparkUtils.prep_model_for_deployment" title="Permalink to this definition">¶</a></dt>
<dd><p>All preprocessing steps to prepare for in DB deployment. Get the mleap model, get class labels</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fittedPipe</strong> – </p></li>
<li><p><strong>df</strong> – </p></li>
<li><p><strong>classes</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SparkUtils.readable_pipeline_stage">
<em class="property">static </em><code class="sig-name descname">readable_pipeline_stage</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pipeline_stage</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SparkUtils.readable_pipeline_stage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SparkUtils.readable_pipeline_stage" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a readable version of the Pipeline stage (without the memory address)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pipeline_stage</strong> – the name of the stage to parse</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SparkUtils.retrieve_artifact_stream">
<em class="property">static </em><code class="sig-name descname">retrieve_artifact_stream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SparkUtils.retrieve_artifact_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SparkUtils.retrieve_artifact_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the binary stream for a given artifact with the specified name and run id</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_context</strong> – (PySpliceContext) the PySpliceContext</p></li>
<li><p><strong>run_id</strong> – (str) the run id for the run that the artifact belongs to</p></li>
<li><p><strong>name</strong> – (str) the name of the artifact</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(bytearray(byte)) byte array from BLOB</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SparkUtils.try_get_class_labels">
<em class="property">static </em><code class="sig-name descname">try_get_class_labels</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pipeline</span><span class="p">:</span> <span class="n">pyspark.ml.pipeline.PipelineModel</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SparkUtils.try_get_class_labels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SparkUtils.try_get_class_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to get the class labels for a Spark Model. This will only work if the Pipeline has a Model and an IndexToString
where the inputCol of the IndexToString is the same as the predictionCol of the Model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pipeline</strong> – (PipelineModel) The fitted spark PipelineModel</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List[str] the class labels in order of numeric value (0,1,2 etc)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="splicemachine.mlflow_support.utilities.SpliceMachineException">
<em class="property">exception </em><code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">SpliceMachineException</code><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#SpliceMachineException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SpliceMachineException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<dl class="py attribute">
<dt id="splicemachine.mlflow_support.utilities.SpliceMachineException.args">
<code class="sig-name descname">args</code><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SpliceMachineException.args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="splicemachine.mlflow_support.utilities.SpliceMachineException.with_traceback">
<code class="sig-name descname">with_traceback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#splicemachine.mlflow_support.utilities.SpliceMachineException.with_traceback" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception.with_traceback(tb) –
set self.__traceback__ to tb and return self.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.add_model_to_metadata">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">add_model_to_metadata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">schema_table_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#add_model_to_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.add_model_to_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the deployed model to the model_metadata table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_context</strong> – (PySpliceContext) the PySpliceContext</p></li>
<li><p><strong>run_id</strong> – (str) the run_id of the deployment</p></li>
<li><p><strong>schema_table_name</strong> – (str) the SCHEMA.TABLE that the model was deployed to</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(None)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.alter_model_table">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">alter_model_table</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">schema_table_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">classes</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">model_type</span><span class="p">:</span> <span class="n">enum.Enum</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="p">:</span> <span class="n">bool</span></em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#alter_model_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.alter_model_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Alters the provided table for deployment. Adds columns for storing model results as well as metadata such as
current user, eval time, run_id, and the prediction label columns</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_context</strong> – pysplicectx</p></li>
<li><p><strong>run_id</strong> – (str) the run_id for this model</p></li>
<li><p><strong>schema_table_name</strong> – (str) the schema.table to create the table under</p></li>
<li><p><strong>classes</strong> – (List[str]) the labels of the model (if they exist)</p></li>
<li><p><strong>primary_key</strong> – List[Tuple[str,str]] column name, SQL datatype for the primary key(s) of the table</p></li>
<li><p><strong>model_type</strong> – (ModelType) Whether the model is a Regression, Classification or Clustering (with/without probabilities)</p></li>
<li><p><strong>verbose</strong> – (bool) whether to print the SQL query</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.create_model_deployment_table">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">create_model_deployment_table</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">schema_table_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">schema_str</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">classes</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">primary_key</span><span class="p">:</span> <span class="n">List<span class="p">[</span>Tuple<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">model_type</span><span class="p">:</span> <span class="n">enum.Enum</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="p">:</span> <span class="n">bool</span></em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#create_model_deployment_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.create_model_deployment_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the table that holds the columns of the feature vector as well as a unique MOMENT_ID</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_context</strong> – pysplicectx</p></li>
<li><p><strong>run_id</strong> – (str) the run_id for this model</p></li>
<li><p><strong>schema_table_name</strong> – (str) the schema.table to create the table under</p></li>
<li><p><strong>schema_str</strong> – (str) the structure of the schema of the table as a string (col_name TYPE,)</p></li>
<li><p><strong>classes</strong> – (List[str]) the labels of the model (if they exist)</p></li>
<li><p><strong>primary_key</strong> – List[Tuple[str,str]] column name, SQL datatype for the primary key(s) of the table</p></li>
<li><p><strong>model_type</strong> – (ModelType) Whether the model is a Regression, Classification or Clustering (with/without probabilities)</p></li>
<li><p><strong>verbose</strong> – (bool) whether to print the SQL query</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.create_parsing_trigger">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">create_parsing_trigger</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">schema_table_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">primary_key</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">classes</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">model_type</span><span class="p">:</span> <span class="n">enum.Enum</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="p">:</span> <span class="n">bool</span></em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#create_parsing_trigger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.create_parsing_trigger" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the secondary trigger that parses the results of the first trigger and updates the prediction row populating the relevant columns</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_context</strong> – (PySpliceContext) the PySpliceContext</p></li>
<li><p><strong>schema_table_name</strong> – (str) the schema.table to create the table under</p></li>
<li><p><strong>primary_key</strong> – List[Tuple[str,str]] column name, SQL datatype for the primary key(s) of the table</p></li>
<li><p><strong>run_id</strong> – (str) the run_id to deploy the model under</p></li>
<li><p><strong>classes</strong> – (List[str]) the labels of the model (if they exist)</p></li>
<li><p><strong>model_type</strong> – (Enum) the model type (H2OModelType or SparkModelType)</p></li>
<li><p><strong>verbose</strong> – (bool) whether to print the SQL quer</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.create_prediction_trigger">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">create_prediction_trigger</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">schema_table_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">feature_columns</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">schema_types</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">schema_str</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">primary_key</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">model_type</span><span class="p">:</span> <span class="n">enum.Enum</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="p">:</span> <span class="n">bool</span></em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#create_prediction_trigger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.create_prediction_trigger" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the trigger that calls the model on data row insert. This trigger will call predict when a new row is inserted into the data table
and update the row to contain the prediction(s)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_context</strong> – (PySpliceContext) the PySpliceContext</p></li>
<li><p><strong>schema_table_name</strong> – (str) the schema.table to create the table under</p></li>
<li><p><strong>run_id</strong> – (str) the run_id to deploy the model under</p></li>
<li><p><strong>feature_columns</strong> – (List[str]) the original features that are transformed into the final feature vector</p></li>
<li><p><strong>schema_types</strong> – (Dict[str, str]) a mapping of feature column to data type</p></li>
<li><p><strong>schema_str</strong> – (str) the structure of the schema of the table as a string (col_name TYPE,)</p></li>
<li><p><strong>primary_key</strong> – List[Tuple[str,str]] column name, SQL datatype for the primary key(s) of the table</p></li>
<li><p><strong>model_type</strong> – (Enum) Whether the model is a Regression, Classification or Clustering (with/without probabilities)</p></li>
<li><p><strong>verbose</strong> – (bool) whether to print the SQL query</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.create_vti_prediction_trigger">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">create_vti_prediction_trigger</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">schema_table_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">feature_columns</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">schema_types</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">schema_str</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">primary_key</span><span class="p">:</span> <span class="n">List<span class="p">[</span>Tuple<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">classes</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">model_type</span><span class="p">:</span> <span class="n">enum.Enum</span></em>, <em class="sig-param"><span class="n">sklearn_args</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">pred_threshold</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="p">:</span> <span class="n">bool</span></em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#create_vti_prediction_trigger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.create_vti_prediction_trigger" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the VTI trigger for model types that use VTIs instead of standard Java Functions</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_context</strong> – (PySpliceContext) the PySpliceContext</p></li>
<li><p><strong>schema_table_name</strong> – (str) the schema.table to create the table under</p></li>
<li><p><strong>run_id</strong> – (str) the run_id to deploy the model under</p></li>
<li><p><strong>feature_columns</strong> – (List[str]) the original features that are transformed into the final feature vector</p></li>
<li><p><strong>schema_types</strong> – (Dict[str, str]) a mapping of feature column to data type</p></li>
<li><p><strong>schema_str</strong> – (str) the structure of the schema of the table as a string (col_name TYPE,)</p></li>
<li><p><strong>primary_key</strong> – List[Tuple[str,str]] column name, SQL datatype for the primary key(s) of the table</p></li>
<li><p><strong>classes</strong> – (List[str]) the label columns of the model prediction</p></li>
<li><p><strong>model_type</strong> – (Enum) Whether the model is a Regression, Classification or Clustering (with/without probabilities)</p></li>
<li><p><strong>sklearn_args</strong> – (Dict[str,str]) Any custom scikit-learn prediction arguments</p></li>
<li><p><strong>pred_threshold</strong> – (float) the optional keras prediction threshold for predictions</p></li>
<li><p><strong>verbose</strong> – (bool) whether to print the SQL query</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.drop_tables_on_failure">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">drop_tables_on_failure</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">schema_table_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">model_already_exists</span><span class="p">:</span> <span class="n">bool</span></em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#drop_tables_on_failure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.drop_tables_on_failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempts to roll back transactions from the deploy_db function on failure</p>
<p>Due to some limitations DB-7726 we can’t use fully utilize a single consistent JDBC connection using NSDS
So we will try to rollback on failure using basic logic.</p>
<p>If the model was already in the models table (ie it had been deployed before), we will leave it. Otherwise, delete
Leave the tables.</p>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.find_inputs_by_output">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">find_inputs_by_output</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dictionary</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#find_inputs_by_output"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.find_inputs_by_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the input columns for a given output column</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dictionary</strong> – dictionary to search</p></li>
<li><p><strong>value</strong> – column</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None if not found, otherwise first column</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.get_df_for_mleap">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">get_df_for_mleap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_ctx</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">schema_table_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">df</span><span class="p">:</span> <span class="n">pyspark.sql.dataframe.DataFrame</span></em><span class="sig-paren">)</span> &#x2192; pyspark.sql.dataframe.DataFrame<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#get_df_for_mleap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.get_df_for_mleap" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the dataframe for the deployment if the deployment is of a Spark model
MLeap needs a dataframe in order to serialize the model. If it’s not passed in, we need to get it from an existing table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_ctx</strong> – PySpliceContext</p></li>
<li><p><strong>schema_table_name</strong> – str the table to get the dataframe from</p></li>
<li><p><strong>df</strong> – the dataframe if it exists or none</p></li>
<li><p><strong>create_model_table</strong> – bool if the user wants to create the table</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(SparkDF) the dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.get_feature_columns_and_types">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">get_feature_columns_and_types</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_ctx</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">df</span><span class="p">:</span> <span class="n">pyspark.sql.dataframe.DataFrame</span></em>, <em class="sig-param"><span class="n">create_model_table</span><span class="p">:</span> <span class="n">bool</span></em>, <em class="sig-param"><span class="n">model_cols</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">schema_table_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>List<span class="p">[</span>str<span class="p">]</span><span class="p">, </span>Dict<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span><span class="p">]</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#get_feature_columns_and_types"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.get_feature_columns_and_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the features and their data types for the table of the deployed model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> – The dataframe or None</p></li>
<li><p><strong>create_model_table</strong> – bool if the user wants to create the table</p></li>
<li><p><strong>schema_table_name</strong> – The table in question</p></li>
<li><p><strong>model_cols</strong> – List[str] the columns that go into the feature vector for the model or None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(Tuple[List[str], Dict[str,str]]) The ordered feature columns as well as the schema types</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.get_mleap_model">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">get_mleap_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">fittedPipe</span><span class="p">:</span> <span class="n">pyspark.ml.pipeline.PipelineModel</span></em>, <em class="sig-param"><span class="n">df</span><span class="p">:</span> <span class="n">pyspark.sql.dataframe.DataFrame</span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; object<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#get_mleap_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.get_mleap_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Turns a fitted Spark Pipeline into an Mleap Transformer</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_context</strong> – pysplicectx</p></li>
<li><p><strong>fittedPipe</strong> – Fitted Spark Pipeline</p></li>
<li><p><strong>df</strong> – A TRANSFORMED dataframe. ie a dataframe that the pipeline has called .transform() on</p></li>
<li><p><strong>run_id</strong> – (str) the MLFlow run associated with the model</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.get_model_library">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">get_model_library</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">object</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#splicemachine.mlflow_support.constants.DBLibraries" title="splicemachine.mlflow_support.constants.DBLibraries">splicemachine.mlflow_support.constants.DBLibraries</a><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#get_model_library"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.get_model_library" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the model library of a trained model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model</strong> – The trained model</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DBLibraries</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.get_pod_uri">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">get_pod_uri</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pod</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">port</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">_testing</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#get_pod_uri"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.get_pod_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>Get address of MLFlow Container for Kubernetes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pod</strong> – (str) the url of the mlflow pod</p></li>
<li><p><strong>port</strong> – (str or int) the port of the pod for mlflow communication</p></li>
<li><p><strong>_testing</strong> – (bool) Whether you are testing [default False]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(str) the pod URI</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.get_user">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">get_user</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#get_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.get_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current logged in user to Jupyter</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(str) name of the logged in user</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.insert_artifact">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">insert_artifact</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">byte_array</span><span class="p">:</span> <span class="n">bytearray</span></em>, <em class="sig-param"><span class="n">run_uuid</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">file_ext</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#insert_artifact"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.insert_artifact" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a serialized object into the Mlmanager artifacts table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_context</strong> – (PySpliceContext) the PySpliceContext</p></li>
<li><p><strong>name</strong> – (str) the path to store the binary under (with respect to the current run)</p></li>
<li><p><strong>byte_array</strong> – (bytearray) Java byte array</p></li>
<li><p><strong>run_uuid</strong> – (str) run uuid for the run</p></li>
<li><p><strong>file_ext</strong> – (str) the file extension of the model (used for downloading)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.insert_mleap_model">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">insert_mleap_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">pyspark.ml.pipeline.PipelineModel</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#insert_mleap_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.insert_mleap_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert an MLeap Transformer model into the database as a Blob</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_context</strong> – pysplicectx</p></li>
<li><p><strong>model_id</strong> – (str) the mlflow run_id that the model is associated with</p></li>
</ul>
</dd>
</dl>
<p>(with respect to the current run)
:param model: (PipelineModel) the fitted Mleap Transformer (pipeline)
:return: (bool) whether or not the model exists already</p>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.insert_model">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">insert_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">run_id</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">byte_array</span><span class="p">:</span> <span class="n">bytearray</span></em>, <em class="sig-param"><span class="n">library</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">version</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#insert_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.insert_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a serialized model into the Mlmanager models table for in database model deployment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_context</strong> – (PySpliceContext) The PySpliceContext</p></li>
<li><p><strong>run_id</strong> – (str) mlflow run id</p></li>
<li><p><strong>byte_array</strong> – (bytearray) byte array</p></li>
<li><p><strong>library</strong> – (str) The library of the model (mleap, h2omojo etc)</p></li>
<li><p><strong>version</strong> – (str) The version of the library</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bool whether or not the model already exists</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="splicemachine.mlflow_support.utilities.validate_primary_key">
<code class="sig-prename descclassname">splicemachine.mlflow_support.utilities.</code><code class="sig-name descname">validate_primary_key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">splice_ctx</span><span class="p">:</span> <span class="n"><a class="reference internal" href="splicemachine.spark.html#splicemachine.spark.context.PySpliceContext" title="splicemachine.spark.context.PySpliceContext">splicemachine.spark.context.PySpliceContext</a></span></em>, <em class="sig-param"><span class="n">primary_key</span><span class="p">:</span> <span class="n">List<span class="p">[</span>Tuple<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">schema</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">table</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="reference internal" href="_modules/splicemachine/mlflow_support/utilities.html#validate_primary_key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#splicemachine.mlflow_support.utilities.validate_primary_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates the primary key passed by the user conforms to SQL. If the user is deploying to an existing table
This verifies that the table has a primary key</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>splice_ctx</strong> – (PySpliceContext) The PySpliceContext</p></li>
<li><p><strong>primary_key</strong> – (List[Tuple[str,str]]) column name, SQL datatype for the primary key(s) of the table</p></li>
<li><p><strong>schema</strong> – (str) the name of the schema being deployed to</p></li>
</ul>
</dd>
</dl>
<p>:param table (str) the name of the table being deployed to
:return: (List[str]) the primary keys</p>
</dd></dl>

</div>
<div class="section" id="module-splicemachine.mlflow_support">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-splicemachine.mlflow_support" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="splicemachine.spark.html" class="btn btn-neutral float-right" title="splicemachine.spark package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="splicemachine.html" class="btn btn-neutral float-left" title="splicemachine package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Splice Machine

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>